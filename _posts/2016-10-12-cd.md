---
layout: post
title: "Continuous deployment with git, travis CI, heroku (or dokku)"
description: ""
category: linux
tags: [linux, dokku, node.js, agile, heroku, process, tools, docker, mongo, nginx]
---
{% include JB/setup %}

A friend recently asked me about details for my Continuous Deployment setup 
for small projects. I promised to write him some notes about it - here they are.

# Define the goal

I have tried to set up a process which allows me to prototype quickly, bring up 
a new project online with small effort, but still have a sound framework of 
integration tests, separation of development from staging (or production). 

This is meant for small projects which are typically iterated fast by a small 
team (or just one developer), but coming from a big team development I would not 
feel well without some suporting structure like source control.

The minimum I want to do is: 

- develop locally, run and test my software locally on my laptop
- have a source control system which allows to track changes and branch out 
for trial versions.
- have some testing framework to avoid completely broken versions to go live
- have a deploy to a public url for staging and/or production, with a single 
line command to deploy

# Example: Limitless Garden

My example project is 
[Limitless garden](https://github.com/abarbanell/limitless-garden) - here you can 
see most of this in action.

# start with github

The starting point is creating a [github repository](https://github.com/new) 
and clone it to your working directory. 

```
$ git clone git@github.com:<your-github-name>/<your-repo-name>.git
```

In my case the platform is node.js with Express, so I initialize the project with 

```
$ cd <my-repo-name>
$ express -e .
$ npm install
````

The ```-e```switch in the express is for the ejs template engine, my personal 
favourite.

Now you can develop locally and run your local instance with 

```
$ npm start
```

This will expose your website on http://localhost:3000

Any changes of course are commited as usual with 

````
git add .
git commit 
git push
````

or (if you use Visual Studio Code like me) with the corresponding UI functions for 
git interaction.


# deploy to heroku

to deploy this from git to heroku you can just set up a webhook from your 
github repo to your heroku instance. 


